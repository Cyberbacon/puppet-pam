###############################################################################
# << FILE MANAGED BY PUPPET >>
# Manual changes are likey to be overwritten
###############################################################################

uri  <%= scope.lookupvar('pam::pamd::ldap_uri') %>
base <%= scope.lookupvar('pam::pamd::ldap_base') %>

#ldap_version   <x%= version %>
#timelimit      <x%= timelimit %>
#bind_timelimit <x%= bind_timelimit %>
#idle_timelimit <x%= idle_timelimit %>
#bind_policy    soft
#deref          never

#<x% if binddn != false then -%>
#binddn <x%= binddn %>
#bindpw <x%= bindpw %>
#<x% end -%>

#<x% if nsswitch == true then -%>
# DNs in groups
#nss_schema         rfc2307bis
#nss_map_attribute  uniquemember member
#nss_map_attribute memberuid    member
#nss_getgrent_skipmembers yes

#nss_base_passwd <x%= nss_passwd %>,<x%= base %>?sub
#nss_base_shadow <x%= nss_shadow %>,<x%= base %>?sub
#nss_base_group  <x%= nss_group  %>,<x%= base %>?one
#nss_initgroups_ignoreusers root daemon bin sys sync games man lp mail news uucp proxy www-data backup list irc gnats nobody libuuid statd sshd puppet
#<x% end -%>

<% if scope.lookupvar('pam::pamd::pam_ldap') == true then -%>
pam_login_attribute  <%= scope.lookupvar('pam::pamd::ldap_att_login') %>
pam_member_attribute <%= scope.lookupvar('pam::pamd::ldap_att_member') %>
pam_password         <%= scope.lookupvar('pam::pamd::ldap_passwd') %>
pam_filter           <%= scope.lookupvar('pam::pamd::ldap_filter') %>
<% end -%>

